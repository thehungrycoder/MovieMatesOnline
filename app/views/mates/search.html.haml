%h1 Search Mates
%br
.row-fluid
  .span12
    = form_for(:user, :html =>  {:url => mates_search_path, :method => 'get'}) do |f|
      = f.label :name
      = f.text_field :name
      %br
      = f.submit 'Search', :class => 'btn btn-primary'
    - if @users.present?
      .mates
        - @users.each do |user|
          .mate
            .thumb
              = link_to image_tag(get_user_avatar_url(user), :height => '140px', :width => '140px'), user_profile_path(user)
            .info
              = user.name
              %br
              Location:
              = user.location || 'Unknown'
              %br
            .actions
              - if user.friend_with? current_user
                you are mates!
              - elsif user.blocked? current_user

              - elsif user.invited? current_user
                = link_to 'Approve Mate', friendship_accept_path(user), :class => 'btn btn-primary btn-mini', :method => :put
                = link_to 'Block', friendship_block_path(user), :class => 'btn btn-danger btn-mini', :method => :put
              - elsif current_user.invited? user
                Mate request already sent...
              - elsif !user.connected_with? current_user
                = link_to 'Add Mate', friendship_request_path(user.id), :class => 'btn btn-primary btn-mini'
                = link_to 'Block', friendship_block_path(user), :class => 'btn btn-danger btn-mini', :method => :put

              /- elsif user.
          /= pagination_links(@mates)
        .clearfix
    - else
      .alert.alert-error
        Oh no! You're so lonely. Start adding friends now!